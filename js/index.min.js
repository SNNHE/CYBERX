"use strict";var container=document.getElementById("_img"),width=container.clientWidth,height=container.clientHeight,pageRender=function(){function e(e,t,n){var a=new Date;a.setDate(a.getDate()+n),document.cookie=e+"="+t+";expires="+a.toGMTString()}function t(e){for(var t=unescape(document.cookie),n=t.split("; "),a="",i=0;i<n.length;i++){var o=n[i].split("=");if(o[0]==e){a=o[1];break}}return a}function n(e,t){var n=null;return function(){for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];var r=this;n||(n=setTimeout(function(){e.call.apply(e,[r].concat(i)),n=null},t))}}function a(){$("#textPrint").css("opacity",1);var e=$("#textPrint"),t=new SplitText(e,{type:"chars"});(new TimelineMax).staggerFrom(t.chars,.5,{opcity:0,scale:0,y:0,ease:Elastic.easeInOut},.05)}function i(){var t=$(".nav .language"),n=$("#globalLocation .earth-location");t.click(function(){var t=$.trim($(this).text()),a=n.hasClass("zhbg");"English"===t?($(this).find(".text").text("简体中文"),a||n.addClass("zhbg"),h("zh"),e("language","zh",1)):($(this).find(".text").text("English"),a&&n.removeClass("zhbg"),h("en"),e("language","en",1))})}function o(){var e=new ScrollMagic.Controller;["technology tec-introduce","technology tec-info-text","ourTeam team-introduce","industryBanner industry-title","industryBanner industry-slides","globalLocation global-title","globalLocation earth-location"].forEach(function(t,n){var a=t.split(" "),i=$("."+a[1]).hasClass("scroll-delay")?450:100,o=TweenMax.fromTo($("."+a[1]),1,{opacity:0},{opacity:1,ease:Bounce.easeInOut},.2);new ScrollMagic.Scene({triggerElement:"#"+a[0],offset:i,triggerHook:.95,duration:200}).setPin($("."+a[1])).setTween(o).addTo(e)}),$("#technology .card").each(function(t,n){var a=void 0;a=0===t?.95:1===t?.85:.75;var i=TweenMax.fromTo(n,1,{top:"50px",opacity:0},{top:0,opacity:1,ease:Linear.easeNone});new ScrollMagic.Scene({triggerElement:"#technology",offset:550,triggerHook:a,duration:200}).setPin($(n)).setTween(i).addTo(e)});for(var t=document.getElementsByClassName("team-card"),n=0;n<t.length;n++)new ScrollMagic.Scene({triggerElement:t[n],offset:50,triggerHook:.9}).setClassToggle(t[n],"visible").addTo(e)}function r(){var e=$(".slide"),t=$(window);e.offset().top+240-t.scrollTop()<t.height()?(e.find(".slide-text").addClass("show"),e.find(".slide-img").addClass("show")):(e.find(".slide-text").removeClass("show"),e.find(".slide-img").removeClass("show"))}function s(){width=container.clientWidth,height=container.clientHeight;$(".nav-tab .title").each(function(){var e=$(this).attr("data-id"),t=$(e).offset().top,n=$(e).height(),a=$(window).scrollTop(),i=t-129,o=t+n-129;n<u&&(i-=u-n),$(this).removeClass("active"),a>i&&a<o&&$(this).addClass("active")})}function c(){r(),s()}function l(){c();var e=$(window);e.scroll(n(c,800)),e.resize(n(s,800))}function d(){new Swiper("#banner .swiper-container",{pagination:"#banner .swiper-pagination",paginationClickable:!0,autoplayDisableOnInteraction:!1,effect:"fade"})}function g(){new Swiper("#industryBanner .swiper-container",{watchSlidesProgress:!0,slidesPerView:"auto",centeredSlides:!0,loopedSlides:3,loop:!0,pagination:"#industryBanner .swiper-pagination",paginationClickable:!0,onProgress:function(e,t){console.log("onProgress");var n=e.slides[e.activeIndex];$(n).css("opacity",1),$(n).prev().css("opacity",.3),$(n).next().css("opacity",.3);for(var a=0;a<e.slides.length;a++){var i=e.slides.eq(a),o=e.slides[a].progress,r=1;Math.abs(o)>1&&(r=.3*(Math.abs(o)-1)+1);var s=o*r*337.5+"px",c=1-Math.abs(o)/5,l=999-Math.abs(Math.round(10*o));i.transform("translateX("+s+") scale("+c+")"),i.css("zIndex",l),Math.abs(o)>1&&i.css("opacity",0)}},onSetTransition:function(e,t){for(var n=0;n<e.slides.length;n++){e.slides.eq(n).transition(t)}},onInit:function(e){var t=e.slides[e.activeIndex];$(t).prev().css("opacity",.3),$(t).next().css("opacity",.3)},onSlideChangeEnd:function(e){var t=e.slides[e.activeIndex];$(t).css("opacity",1),$(t).prev().css("opacity",.3),$(t).next().css("opacity",.3)}})}function h(e){$.i18n.init({lng:e,resGetPath:"./locales/"+e+"/translate.json",ns:{namespaces:["translation","message"],defaultNs:"translation"}},function(e,t){$("[data-i18n]").i18n(),$("[data-i18n-html]").each(function(){var e=$(this).attr("data-i18n-html");$(this).html($.t(e))})})}function p(){function e(){requestAnimationFrame(e),l.rotation.y+=.011,h.rotation.y+=-.003,n.render(a,i)}var t=width/height,n=new THREE.WebGLRenderer({antialias:!0,alpha:!0});n.setSize(width,height),container.appendChild(n.domElement);var a=new THREE.Scene,i=new THREE.PerspectiveCamera(50,t,.1,1e3);i.position.z=500,i.up.y=7,i.lookAt(new THREE.Vector3(0,0,0));var o=new THREE.Group;a.add(new THREE.AmbientLight(16777215,.6));var r=new THREE.DirectionalLight(16777215,3);r.position.set(1500,2500,0),a.add(r);var s=(new THREE.TextureLoader).load("images/earthloop.png"),c=new THREE.MeshLambertMaterial({map:s,side:THREE.DoubleSide,transparent:!0,opacity:.8}),l=new THREE.Mesh(new THREE.SphereGeometry(130,60,60),c);o.add(l);var d=(new THREE.TextureLoader).load("images/outerloop.png"),g=new THREE.MeshLambertMaterial({map:d,side:THREE.DoubleSide,transparent:!0,opacity:.8,color:1924095}),h=new THREE.Group,p=new THREE.Mesh(new THREE.SphereGeometry(150,60,60),g);h.add(p),o.add(h),o.rotation.x=.1,o.rotation.y=-.3,o.rotation.z=-.4,a.add(o),e()}var u=$(window).height();return{init:function(){h(t("language")||"en"),p(),a(),i(),l(),o(),d(),g()}}}();pageRender.init();